<!DOCTYPE html><html lang="ru"><head>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Калькулятор — Пятак</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="/styles.css" rel="stylesheet">
<script src="/config.js"></script>
</head><body>

<!-- Навигация -->
<nav class="navbar navbar-expand-lg bg-light border-bottom">
  <div class="container">
    <a class="navbar-brand" href="/index.html">Пятак — заявки</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
      <span class="navbar-toggler-icon"></span></button>
    <div id="nav" class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="/index.html">Создать заявку</a></li>
        <li class="nav-item"><a class="nav-link" href="/history.html">История заявок</a></li>
        <li class="nav-item"><a class="nav-link active" href="/calculator.html">Калькулятор</a></li>
        <li class="nav-item"><a class="nav-link" href="/tips.html">Советы</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container" style="max-width:900px;margin-top:36px;margin-bottom:36px">
  <div class="card p-4">
    <h3 class="mb-3">Калькулятор тарифов</h3>
    <div class="row g-3">
      <div class="col-md-4">
        <label class="form-label">Клуб</label>
        <select id="club" class="form-select" onchange="renderTariffs()">
          <option value="pyatak">Пятак</option>
          <option value="premium">Пятак Premium</option>
          <option value="level">Пятак Level</option>
        </select>
      </div>
      <div class="col-md-8">
        <label class="form-label">Тариф</label>
        <select id="tariff" class="form-select"></select>
        <div class="form-text">Тарифы настраиваются в <code>config.js</code> → <code>CONFIG.tariffs</code>.</div>
      </div>
    </div>

    <hr class="my-4">

    <div class="row g-3">
      <div class="col-md-6">
        <h5>Время → Сумма</h5>
        <div class="input-group mb-2">
          <span class="input-group-text">Часы</span>
          <input id="h1" type="number" min="0" step="1" class="form-control" value="1">
          <span class="input-group-text">Мин</span>
          <input id="m1" type="number" min="0" max="59" step="1" class="form-control" value="0">
        </div>
        <button class="btn btn-primary" onclick="calcMoney()">Посчитать сумму</button>
        <div id="out1" class="mt-2 muted"></div>
      </div>

      <div class="col-md-6">
        <h5>Сумма → Время</h5>
        <div class="input-group mb-2">
          <span class="input-group-text">Сумма, тг</span>
          <input id="sum2" type="number" min="0" step="50" class="form-control" value="500">
        </div>
        <button class="btn btn-primary" onclick="calcTime()">Посчитать время</button>
        <div id="out2" class="mt-2 muted"></div>
      </div>
    </div>
  </div>
</div>

<script>
function renderTariffs(){
  const club = document.getElementById('club').value;
  const tariffs = CONFIG.tariffs[club] || {};
  const sel = document.getElementById('tariff'); sel.innerHTML = "";
  Object.entries(tariffs).forEach(([name, pricePerHour])=>{
    const o = document.createElement('option');
    o.value = pricePerHour; o.textContent = `${name} — ${pricePerHour} тг/час`;
    sel.appendChild(o);
  });
}
function calcMoney(){
  const price = Number(document.getElementById('tariff').value||0);
  const h = Number(document.getElementById('h1').value||0);
  const m = Number(document.getElementById('m1').value||0);
  const totalHours = h + (m/60);
  const sum = Math.round(totalHours * price);
  document.getElementById('out1').textContent = `Итого: ${sum} тг`;
}
function calcTime(){
  const price = Number(document.getElementById('tariff').value||0);
  const sum = Number(document.getElementById('sum2').value||0);
  const totalHours = sum / price;
  const hh = Math.floor(totalHours);
  const mm = Math.round((totalHours - hh) * 60);
  document.getElementById('out2').textContent = `Итого: ${hh} ч ${mm} мин`;
}
renderTariffs();
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body></html>
