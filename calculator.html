<!DOCTYPE html><html lang="ru"><head>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Калькулятор — Пятак</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="/styles.css" rel="stylesheet">
<script src="/config.js?v=1" defer></script>
</head><body>
<nav class="navbar navbar-expand-lg border-bottom mb-3">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center gap-2" href="/index.html">
      <img src="/assets/logo.svg" height="24" alt="logo"><span>Пятак — заявки</span>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav"><span class="navbar-toggler-icon"></span></button>
    <div id="nav" class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="/index.html">Создать заявку</a></li>
        <li class="nav-item"><a class="nav-link" href="/history.html">История заявок</a></li>
        <li class="nav-item"><a class="nav-link active" href="/calculator.html">Калькулятор</a></li>
        <li class="nav-item"><a class="nav-link" href="/tips.html">Советы</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container" style="max-width:900px">
  <div class="card p-4">
    <h3 class="mb-3">Калькулятор тарифов</h3>
    <div class="row g-3">
      <div class="col-md-4">
        <label class="form-label">Клуб</label>
        <select id="club" class="form-select"></select>
      </div>
      <div class="col-md-8">
        <label class="form-label">Тариф</label>
        <select id="tariff" class="form-select"></select>
        <div class="form-text">Тарифы редактируются в <code>config.js → CONFIG.tariffs</code>.</div>
      </div>
    </div>
    <hr class="my-4">
    <div class="row g-4">
      <div class="col-md-6">
        <h5>Время → Сумма</h5>
        <div class="input-group mb-2">
          <span class="input-group-text">Часы</span><input id="h1" type="number" min="0" step="1" class="form-control" value="1">
          <span class="input-group-text">Мин</span><input id="m1" type="number" min="0" max="59" step="1" class="form-control" value="0">
        </div>
        <button class="btn btn-primary" id="b1">Посчитать сумму</button>
        <div id="out1" class="mt-2 muted"></div>
      </div>
      <div class="col-md-6">
        <h5>Сумма → Время</h5>
        <div class="input-group mb-2">
          <span class="input-group-text">Сумма, тг</span><input id="sum2" type="number" min="0" step="50" class="form-control" value="500">
        </div>
        <button class="btn btn-primary" id="b2">Посчитать время</button>
        <div id="out2" class="mt-2 muted"></div>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  const $=sel=>document.querySelector(sel);
  function tariffs(){ return (typeof CONFIG!=='undefined' && CONFIG.tariffs) ? CONFIG.tariffs : {}; }
  function fillClubs(){
    const t=tariffs(); const c=$('#club'); c.innerHTML="";
    [["pyatak","Пятак"],["premium","Пятак Premium"],["level","Пятак Level"]].forEach(([k,n])=>{
      const o=document.createElement('option'); o.value=k; o.textContent=n; c.appendChild(o);
    }); fillTariffs();
  }
  function fillTariffs(){
    const club=$('#club').value; const list=tariffs()[club]||{}; const s=$('#tariff'); s.innerHTML="";
    Object.entries(list).forEach(([name,price])=>{
      const o=document.createElement('option'); o.value=price; o.textContent=`${name} — ${price} тг/час`; s.appendChild(o);
    });
  }
  function calcMoney(){ const price=+$('#tariff').value||0; const h=+$('#h1').value||0; const m=+$('#m1').value||0;
    const sum=Math.round((h+m/60)*price); $('#out1').textContent=`Итого: ${sum} тг`; }
  function calcTime(){ const price=+$('#tariff').value||0; const sum=+$('#sum2').value||0;
    const total=sum/price; const hh=Math.floor(total); const mm=Math.round((total-hh)*60);
    $('#out2').textContent=`Итого: ${hh} ч ${mm} мин`; }
  document.addEventListener('DOMContentLoaded',()=>{
    fillClubs(); $('#club').addEventListener('change',fillTariffs);
    $('#b1').addEventListener('click',calcMoney); $('#b2').addEventListener('click',calcTime);
  });
})();
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body></html>
